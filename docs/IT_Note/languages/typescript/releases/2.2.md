# [TypeScript] 2.2


## [Support for Mix-in classes]

[Support for Mix-in classes]: https://www.typescriptlang.org/docs/handbook/release-notes/typescript-2-2.html

{{label('had_better')}} {{label('normal')}} 

ES2015のMixin class patternをサポートするようになった。  
TypeScriptは多重継承[^多重継承]できないため、そのようなケースで利用できる。

[^多重継承]: `class A extends B, C` のようなパターンを多重継承という

### Mixin constructor type

型`X`に対する`new (...args: any[]) => X`のこと。

### Mixin class

以下の条件を満たすクラスのこと。

* 型パラメータが`Constructor` (`Constructor<AnyClass>`) を継承している
* コンストラクタの引数が`(...args: any[])`かつスーパークラスへの受け渡しが`super(...args)`

具体例。

```typescript
type Constructor<T = {}> = new (...args: any[]) => T;

// すべてのクラスに適応可能なMixin
function Debuggable<C extends Constructor>(BaseClass: C) {
  return class extends BaseClass {
    canDebug = true;
  };
}

// Humanのシグニチャを持つクラスのみに適応可能なMixin
function Ohagozable<C extends Constructor<Human>>(BaseClass: C) {
  return class extends BaseClass {
    ohagoza(message: string) {
      console.log(`${this.name}: ohagoza! ${message}`);
    }
  };
}

class Human {
  constructor(public name: string) {}
}

// Mixin適応
const OhagozaHuman = Debuggable(Ohagozable(Human));

// Mixin適応クラスのインスタンス作成
const take = new OhagozaHuman("Take100");

take.ohagoza(`My tag is ${take.canDebug}`);
// -> Take100: ohagoza! My tag is true
```

## [object type]

[object type]: https://www.typescriptlang.org/docs/handbook/release-notes/typescript-2-2.html#object-type

{{label('should')}} {{label('easy')}} 

primitiveでない型として、`(obj: object)`のようなobject型が追加された。  
以下のいずれでもないような型。

* number
* string
* boolean
* symbol
* null
* undefined
