---
description: TypeScript2.8のリリース内容まとめ
---

# [TypeScript] 2.8

{{ page.meta.description }}


## [Conditional Types]

[Conditional Types]: https://www.typescriptlang.org/docs/handbook/release-notes/typescript-2-8.html#conditional-types

{{label('had_better')}} {{label('normal')}}

他の型が満たす条件によって、型の切り替えができる。  
`T extends U ? X : Y` と書いて **UにTを割り当て可能ならX、そうでなければY** 型 という意味。

**JavaScriptで書かれたある規則に従って動く関数のInterfaceを明確にするもの** という位置づけだと個人的には思っている。

以下のような国籍と、そのアシスタントを定義した場合..

```typescript
interface Japanese {
  myNo: number;
  name: string;
}

interface American {
  name: string;
}

class JapaneseAssistant {
  private _japaneseAssistantBrand!: never;
  hello(human: Japanese): void {
    console.log(`こんにちは。${human.name}さん`);
  }
}

class AmericanAssistant {
  private _americanAssistantBrand!: never;
  hello(human: American): void {
    console.log(`Hello! ${human.name}!`);
  }
}
```

国籍から最適なアシスタントを判定するConditional Type `Assistant<T>` の実装は以下。

```typescript
type Assistant<T> = T extends Japanese
  ? JapaneseAssistant
  : T extends American
  ? AmericanAssistant
  : unknown;
```

第1引数として指定された国籍から、予想されるアシスタント型を第2引数で推論する`assist`関数の実装は以下。

```typescript
function assist<T extends Japanese | American>(
  human: T,
  assistant: Assistant<T>
) {
  // javascriptで頑張っている実装とかがあるはず..
}
```

tscやIDEで推論およびエラーを出してくれる。

```typescript
const beaton: American = { name: "beaton" };

// 第1引数にAmerican型のObjectを入れることで、第2引数はAmericanAssistantとみなされる
assist(beaton, new AmericanAssistant());

// 第2引数にJapaneseAssistantを入れるとエラーになる
assist(beaton, new JapaneseAssistant());
```
